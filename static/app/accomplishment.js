// Generated by CoffeeScript 1.6.3
(function() {
  $(document).ready(function() {
    var app;
    app = window || {};
    app.Accomplishment = Backbone.Model.extend({
      defaults: function() {
        return {
          Name: "Anonymous",
          Body: "I worked on calendar view....",
          Date: new Date(),
          ImagePath: ""
        };
      }
    });
    app.Accomplishments = Backbone.Collection.extend({
      model: app.Accomplishment,
      getAccomplishment: function(date) {
        return this.find(function(model) {
          var a, b;
          a = moment(model.get('Date'));
          b = moment(date);
          return a.month() === b.month() && b.year() === a.year() && a.dayOfYear() === b.dayOfYear();
        });
      }
    });
    app.AccomplishmentView = Backbone.View.extend({
      tagName: "div",
      className: "accomplishment",
      template: _.template($('#accomplishment-template').html()),
      initialize: function() {},
      render: function() {
        $(this.el).html(this.template(this.model.toJSON()));
        $(this.el).find('.date').text(moment(this.model.get('Date')).format("MMM D"));
        return this;
      }
    });
    app.AccomplishmentsView = Backbone.View.extend({
      el: $("#publicView"),
      initialize: function() {
        return this.collection = app.accomplishments = new app.Accomplishments(app.accomplishmentData);
      },
      hide: function() {
        return $(this.el).hide();
      },
      unhide: function() {
        return $(this.el).show();
      },
      render: function() {
        var container,
          _this = this;
        $(this.el).find("#accomplishments").html("");
        this.collection.each(function(model) {
          var accomplishmentView;
          accomplishmentView = new app.AccomplishmentView({
            model: model
          });
          return $(_this.el).find("#accomplishments").append(accomplishmentView.render().el);
        });
        container = document.querySelector('#accomplishments');
        imagesLoaded(container, function() {
          var msnry;
          return msnry = new Masonry(container, {
            columnWidth: 75,
            itemSelector: '.item'
          });
        });
        return this.unhide();
      }
    });
    return app.accomplishmentsView = new app.AccomplishmentsView;
  });

}).call(this);
